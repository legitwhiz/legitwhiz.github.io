# サーバー作業計画書テンプレ

# （例）バッチのログファイルの退避作業計画

## 概要
（例）設計不備によりバッチ処理のログが肥大化していることが健在化した。
　　暫定対応としてそのログファイルをローカル環境に退避し、サーバからは削除する対応を行う。

## 作業計画

作業場所： （例）５Fチームデスク
作業日時： （例）2019/7/8 14:00~15:30
作業者： （例）XXXXX、YYYYY
対象サーバ： （例）バッチ用サーバ prj-batch-001
作業概要：
    1. 事前準備
    2. 作業実施
    3. 動作確認
    4. 事後作業

### サービスについて

- 利用ユーザーへのアナウンスあり
    - 作業の前日と、作業直前に関係者にSlackでアナウンスを行う。
    - 作業直前にXXX部署へ作業開始連絡をする。
- メンテナンスモードはなし 

---

## 事前準備
（解説）事前に準備するもの、行うことにに関してメモる。
- ホワイトボード
- システム構成図
- XXX部署への作業内容共有と許可

## 作業実施

1. 事前準備
[ ] (例)ブリーフィング
[ ] (例)作業開始連絡（Slack周知）
[ ] (例)作業開始連絡（XXX部署電話連絡）

### ログイン〜コマンド実行

[ ] (例)ターミナルのログ記録開始 

[ ] (例)ログインしてサーバホストを確認する
```　
# ログインする
ssh xxx.xxx.xxx.xxx
...
```　

[ ] (例)退避し、対象のプログラムを削除する。
```　
$ cd ~/myworkdir
$ pwd
/home/myname/myworkdir

$ cp -p /path/to/target.log ~/myworkdir/target.log-backup
...

# （解説）基本的に予想されるコマンドの応答内容も含めて想定しておく。

...
... (コマンドレベルの手順書続く)
...
```　

[ ] (例)削除されているか確認する。
```　
$ ls -l /path/to/target.log
（ファイルが見つかりません、のエラーとなる）
```　

### 切り戻し手順
（解説）切り戻し手順に関しては、場合によっては複数のパターンが必要になることもあるだろう。

```　
$ cd ~/myworkdir
$ pwd
/home/myname/myworkdir
$ cp -p ~/myworkdir/target.log-backup /path/to/target.log
$ diff -u /path/to/target.log ~/myworkdir/target.log-backup
```　

## 動作確認
(解説)動作確認は、事前に用意されている回帰テストを行うなど、目的にあった確認をしよう。

[ ] （例）ブラウザで動作確認を行う。（キャッシュをクリアしてアクセス）

## 事後作業
(解説)主たる作業が終わった後の、まとめ作業やらを行う。

[ ] (例)作業終了連絡（Slack共有）
[ ] (例)作業終了連絡（XXX部署電話連絡）
[ ] (例)作業ログの保存
[ ] (例)エビデンス資料の保存

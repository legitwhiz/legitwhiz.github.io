# 仕様書をマークダウンで書き、Gitで管理する

例えばシェルのコーディングしながら、Excelのパラメータシートを見て、詳細設計書に間違いを見つけたらWordで即修正してと、色々なツールを使って、
シェルやconfigを作成しているITインフラ開発者は多いと思います。私もそうでした。
ですが、軽いテキストエディタだけで仕事できたら、どれだけ軽快になるか想像して下さい。


[TOC]

## Markdownで仕様書を共有する
プロジェクト管理に Redmine、GitHub、GitLab、Backlog などを使ってますが、wikiにプロジェクトの概要や、各種手順、議事録などをまとめるため、マークダウンで文書を書くということが、日常的になっています。
でも、設計書の類は、Excelで執筆して、ファイルサーバーで共有するというやり方が大多数です。やはり、納品物としてマークダウンというのは、うーんって感じですね。

そんな中、先日、あるプロジェクトで、設計書としての納品物の体裁はなんでもよいというお客様がいたので、設計書もwikiで書いてwikiそのものを成果物にする試みを行いました。
そのプロジェクトで使用したのは、GitLabです。
コードの管理だけではなくて、wikiもあるし、課題管理もできて、且つ、プライベートリポジトリが無料というのも、プロジェクトの性質にマッチしてました。

Markdownで記述したドキュメントは、以下の通りです。

システム概要
システム構成
機能一覧
画面一覧
テーブル定義書
画面仕様書
WEB APIインターフェース仕様書

githubやgitlabのwikiは、それ自体を git clone してエディタで書くことができるので、上記の仕様書は、エディタで執筆しています。

実際にやってみた印象は、 wikiだけでも十分に仕様書として成立する！ です。 でも、同時に、課題もいくつか見えました。

## 良い点

- ドキュメントをgitでバージョン管理できる
  excelファイルもバージョン管理できるけども、バイナリファイルなので、差分比較できない。
  wikiのテキストファイルは、差分比較ができてよい。

- テキストエディタの軽さ
  文書を執筆するときのアプリケーションの起動の軽さは心地よい。

- 検索性に優れている
  grepでテキスト検索できるので、目的のドキュメントをすぐに探せる。

- ドキュメント間のリンク
  ExcelやWordでもリンクが張れるけども、wikiの手軽さには、遠く及ばない。

- ブラウザで直接編集できる
  設計レビューなどでは、wikiを見ながら、指摘事項をその場で直接修正できる。

- レビューの指摘事項を、即、issueとしてメモできるのも、gitlabを使って感じた良い点でした。

- ドキュメントの共有が楽
  git pushで即共有なので、パスワード付きzipに圧縮して、メールで送信という手間がない。

## イマイチな点

- マークダウンでテーブルを書くのが辛い
  よくあるexcelのテーブル定義書の様式で、テーブル定義を書いてみたのだけど、マークダウンでテーブルを書くのが、なにしろ辛い。

- 図が書けない
  テキストだけなので、表現力が乏しい。ちょっとした図を添えたいときに困る。

- グラフが書けない

  使用する頻度は高くないが、グラフで


- 関数やフィルターが使えない
- 目次も手書き
  Wordなどは、目次を作ってくれるけれど、wikiは、自分で目次を書くしかない。
- 章番号があった方が読みやすい
  MDの場合は、章番号を書かないことが普通なのだけど、長いページでは、章番号があった方が読みやすい（かもしれない）。
  章番号がついた設計書を見慣れているということもあるとは思うのだけど。
- リンク切れ
  手軽にリンクが張れるのはメリットなのだけど、リンク切れすることもよくある。
- 生産性は変わらない
  テキストファイルで仕様書を書いたからといって、設計書の生産性があがるわけではない。
- 成果物としての体裁の弱さ
  このプロジェクトでは、成果物をwikiのままでよかったのだけど、他のプロジェクトでも、このやり方を展開するには、せめて PDF にするくらいのことはできないと厳しい。



## Markdownで書く必要性

| シーン       | エクセル、ワードの仕様書                                     | マークダウン仕様書                                           |
| :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 変更管理     | 変更管理ページを設け記載するため、変更記録に抜け漏れが発生する | バージョン管理ツールにログとして記載するため変更に抜けがない |
| 差分         | とれるツールもあるが良くわからない                           | Diffで明確にわかる                                           |
| 修正点の指摘 | 指摘リストのエクセルなどを作り、担当が修正し、再度確認を行っている。 | プルリクエストで第三者も容易に修正提案ができ、マージを終了した時点で修正が完了し、再度確認をする必要もない。 |
| 仕様書参照   | 技術的には可能だが運用されていないため、毎回文書を開き直し、該当箇所を探している | 相互にリンクを貼ることが当たり前になっていて、問題の箇所がすぐに見られる |





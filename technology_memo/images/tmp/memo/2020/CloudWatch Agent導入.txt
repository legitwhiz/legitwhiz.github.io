
IAM ロールまたは CloudWatch Logs ユーザーを設定するには
  IAM コンソール (https://console.aws.amazon.com/iam/) を開きます。
  ナビゲーションペインで [Roles (ロール) ] を選択します。
  ロール名を選択してロールを選択します (名前の横にあるチェックボックスを選択しないでください)。
  [Attach Policies (ポリシーのアタッチ)] を選択して、[ポリシーの作成] を選択します。
  新しいブラウザタブまたはウィンドウが開きます。
  [JSON] タブを選択して、次の JSON ポリシードキュメントを入力します。

{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "logs:DescribeLogStreams"
    ],
      "Resource": [
        "*"
    ]
  }
 ]
}

  完了したら、[ポリシーの確認] を選択します。構文エラーがある場合、Policy Validator によって報告されます。
  [ポリシーの確認] ページで、作成するポリシーの [名前] と [説明] (オプション) を入力します。ポリシーの [概要] を確認して、ポリシーで許可されている権限を確認します。次に [ポリシーの作成] を選択して作業を保存します。
  ブラウザタブまたはウィンドウを閉じ、ロールの [アクセス権限の追加] を選択します。[更新] を選択し、新しいポリシーを選択してロールに追加します。
  [Attach Policy] を選択します。


Amazon EC2 インスタンスに CloudWatch Logs をインストールして設定する


sudo yum install https://s3.amazonaws.com/amazoncloudwatch-agent/centos/amd64/latest/amazon-cloudwatch-agent.rpm


sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard


sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c file:<設定ファイルのパス> -s
もしくは
sudo systemctl start amazon-cloudwatch-agent.service

sudo systemctl status amazon-cloudwatch-agent.service


tail -f /var/log/amazon/amazon-cloudwatch-agent/amazon-cloudwatch-agent.log

HHKB BT bluetooth一日3,4回切れる

導入してから1週間最初は調子良かったのですが、
何故か一日3,4回bluetoothが切れてしまいます。
Win10側のbluetoothをOFF/ONすると直ぐに
復旧するのですが時々切れるのが煩わしい。

対策としてデバイスマネージャーから
bluetoothアダプタの「電源管理」の
「電力節約のために、コンピュータで
このデバイスを電源オフできるようにする」
のチェックを外し、「ヒューマンインタフェース」
の「Bluetooth HIDデバイス」と
「Bluetooth低エネルギーGATT対応HIDデバイス」
も同様に「電力節約のために、
コンピュータでこのデバイスを
電源オフできるようにする」のチェックを外しました。

しばらく、良かったように見えたのですが、
また再発...。

ググってみるとUSB3.0がノイズを
発生しているようなので、
PCの差す位置を変えてみたが変わらず。
※USB3.0のノイズはWifiでも干渉するようだ。

イベントログを見るとソース:BTHUSBで
「ローカル アダプターは、周辺モードを
サポートするための重要な
低エネルギーコントローラー状態を
サポートしていません。」
とエラー出力...。

「重要な低エネルギー コントローラー状態を
サポートしていません」って
何かを契機にbluetoothアダプタを
省電力モードにしようとしている？？？

ちなみに、LogiCoolのUnifyingで
マウスを使用してますが
BluetoothやWifiと同様に2.4GHz帯を
使用しているのにも関わらず、
まったく無影響なのだ。

イベントログでは、USBと
低エネルギーコントローラーと出ているので
デバイスマネージャーから
「ユニバーサルシリアルバスコントローラー」
の「Intel(R)USB3.0 eXtensible Host Controller」の
「電力節約のために、コンピュータで
このデバイスを電源オフできるようにする」
のチェックを外したところ、
時々切れるもののFn＋Qで直ぐに
復旧するようになった。

また、イベントログの出力ないようも変わり
ソース：HidBthで「Bluetooth HID デバイスは
範囲外になったか、または応答しなくなりました。」
とエラー出力されるようになった。

後で気付いたのだが、アクティブな
電源オプションの詳細設定で、
[USBのセレクティブサスペンドの設定]
を[無効]としてみた。

ちなみに、Intelの公式資料でも、
USB3.0のノイズ問題は言及されている。

想像されるのが、最初はUSB3.0のノイズで
Bluetoothが切れ、そのタイミングで
電源節約のため電源をオフ扱いとされたため
再接続されなくなったと思われる。

そのため、USB3.0のノイズが発生しても
省電力が動作しなければ
bluetoothが完全に途切れることは
なくなるのではないだろうかと推測される。

まあ、とりあえずこれで様子見ですね。

#仕事 #IT #ITインフラ #エンジニア #プログラマー #キーボード #HHKB #マウス #エンジニアあるある #技術書 #ターミナル #エディタ #PC #SE #デバッグ #インフラエンジニア #サーバー #ネットワーク #システム開発 #セキュリティ #linux #unix #storage #ubuntu #windows #開発者 #Developer

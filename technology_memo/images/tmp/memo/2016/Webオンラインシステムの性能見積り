Webシステムのオンラインアプリケーションにおける性能見積もりの方法について説明します。

　まず処理時間を見積もる範囲は、Webサーバー内処理時間とし、利用環境による変動が大きいWebブラウザー、ネットワーク部分の処理時間を除きます。処理時間は［1］静的コンテンツ処理時間、［2］APサーバープロセス処理時間、[3]業務ロジック処理時間、［4］SQL解析時間、［5］ディスクI/O時間の五つに分解し、これに［6］余裕率を掛けて、見積もり時間とします。それぞれの算出方法を示しましょう。

サーバ処理時間
=([1]静的コンテンツ処理時間+[2]APサーバープロセス処理時間+[3]業務ロジック処理時間+[4]SQL解析時間+[5]ディスクI/O時間)*[6]余裕率

［1］静的コンテンツの処理時間
　Webサーバー上で実行される静的コンテンツの処理時間は、以下のように計算します。

　処理時間 ＝ (1画面のコンテンツ数) ÷ (ブラウザーの同時接続数) × (1ファイル当たりアクセス時間)

実測する場合は、ブラウザーからサーバー上の静的コンテンツにアクセスしたときにおける、HTTPサーバープロセス（Apache、IISなど）の滞留時間（リクエストを扱うのにかかった時間）の平均値を使用すればよいでしょう。

［2］APサーバープロセスの処理時間
　APサーバープロセス自体の処理時間は、APサーバープロセス（TomcatやWebLogic Serverなど）のアクセスログに滞留時間を出力させて計測します。
実測する場合は、ほとんど業務処理のないロジックを実行したときの滞留時間の平均値を利用すればよいでしょう。

［3］業務ロジックの処理時間
　APサーバー上で動く業務ロジックの処理時間は、画面に出力する項目数をベースに以下の式で見積もります。

　業務ロジック処理時間 ＝（画面項目数）×（1項目当たりアクセス時間)

　1項目当りのアクセス時間は、業務ロジック実行時のAPサーバー滞留時間から「[2]APサーバープロセス処理時間」を引いた値を求め、それを（画面項目数）で割った値を利用します。実測する場合は、プロトタイプを開発します。

　業務ロジックの処理時間は本来、業務ロジックごとに異なりますが、DBサーバーの処理時間に比べて影響は小さいので、平均的な業務ロジックのみを定義し、そのほかは「処理の重さ」を考慮して補正する形でかまいません。

［4］SQL文解析処理時間
　SQL解析処理時間は、DBサーバーがSQL文を解析する時間のことです。厳密には実行するSQL文によって変わりますが、見積もり段階では一律で算出してかまいません。

［5］ディスクI/Oの処理時間
　ディスクI/Oの処理時間は、SQL文の実行時に発生するディスクI/Oの所要時間のことです。ディスクI/Oは、コンピュータで最も遅い処理の一つなので、レスポンス時間の見積もりには最も重要です。1回のディスクI/O時間は、ディスク構成が近い環境での実測値を使用するのがよいでしょう。

　ディスクI/Oは、DBサーバー内のキャッシュがヒットすれば発生しません。SQL文ごとにキャッシュヒットが期待できるものとできないものを区別して、キャッシュヒットが期待されないものに対して処理時間を見積もります。

［6］余裕率
　安全をみて、余裕率は1.5～2倍程度にしておきます。
